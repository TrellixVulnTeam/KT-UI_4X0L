<div class="container">
  <h3>Register Page</h3>
  <div class="row">
    <div class="col-lg-4">
      <form (ngSubmit)="register(regform)" #regform="ngForm">
        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" name="email" id="email" #email="ngModel" ngModel class="form-control" required
            pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" [class.success]="!email.invalid">
          <div *ngIf="email.errors &&(email.touched || email.dirty)" class="text-error">
            <small class="text-danger" *ngIf="email.errors.required">Please provide email</small>
            <small *ngIf="email.errors.pattern" class="text-danger">Email format is invalid</small>
          </div>
          </div>
        <div class="form-group">
          <label for="name">Name</label>
          <input type="name" name="name" id="name" #uname="ngModel" ngModel class="form-control"
          required
          [class.success]="!uname.invalid">
          <div *ngIf="uname.errors &&(uname.touched || uname.dirty)" class="text-error">
            <small class="text-danger" *ngIf="uname.errors.required">Please provide name</small>
          </div>
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" name="password" id="password" #pwd="ngModel" ngModel class="form-control" required
          pattern="^(?=.{8,}$).*$" [class.success]="!pwd.invalid">
          <div *ngIf="pwd.errors &&(pwd.touched || pwd.dirty)" class="text-error">
            <small class="text-danger" *ngIf="pwd.errors.required">Please set a password</small>
            <small *ngIf="pwd.errors.pattern" class="text-danger">Password must contains min 8 characters</small>
          </div>
        </div>
        <button type="submit" class="btn btn-primary">Register</button>        
      </form>
    </div>
  </div>
  <br/>
  <button type="button" class="btn btn-danger" routerLink="/login">Cancel</button>
  <div *ngIf="confirmCode" class="row message-row">
    <h4>Please check your email for the validation code and enter it here:<br>
      <small>(In case you didn't get validation code, you can come back on login screen and verify your account anytime.)</small>
    </h4>
    <div class="col-lg-4">
      <form (ngSubmit)="validateAuthCode(codeform)" #codeform="ngForm">
        <div class="form-group">
          <label for="code">Code</label>
          <input type="text" name="code" id="code" ngModel class="form-control" required>
        </div>
        <button type="submit" class="btn btn-primary">Validate Code</button>
      </form>
    </div>
  </div>
  <div *ngIf="codeWasConfirmed" class="alert alert-success">
    <a routerLink="/login" class="close" data-dismiss="alert" aria-label="close">&times;</a>
    Account verification success, you can <a routerLink="/login" class="alert-link">login</a> here.
  </div>
  <p *ngIf="isErrorInVerifyEmail">
    <ngb-alert type="danger" (closed)="closeErrorMessage()">{{verifyEmailErrorMessage}}</ngb-alert>
  </p>
</div>